<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Big Data and Cloud Computing</title>
  <meta name="description" content="Course materials for Big Data and Cloud Computing">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Big Data and Cloud Computing" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="figures/cover_image.png" />
  <meta property="og:description" content="Course materials for Big Data and Cloud Computing" />
  <meta name="github-repo" content="bioinformatics-training/big-data-cloud" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Big Data and Cloud Computing" />
  
  <meta name="twitter:description" content="Course materials for Big Data and Cloud Computing" />
  <meta name="twitter:image" content="figures/cover_image.png" />

<meta name="author" content="Sudhakaran Prabakaran and Matt Wayland">


<meta name="date" content="2018-05-30">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="containers.html">
<link rel="next" href="customizing-images.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />










<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">An Introduction to Machine Learning</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> About the course</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#overview"><i class="fa fa-check"></i><b>1.1</b> Overview</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#registration"><i class="fa fa-check"></i><b>1.2</b> Registration</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#prerequisites"><i class="fa fa-check"></i><b>1.3</b> Prerequisites</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#github"><i class="fa fa-check"></i><b>1.4</b> Github</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#license"><i class="fa fa-check"></i><b>1.5</b> License</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#contact"><i class="fa fa-check"></i><b>1.6</b> Contact</a></li>
<li class="chapter" data-level="1.7" data-path="index.html"><a href="index.html#colophon"><i class="fa fa-check"></i><b>1.7</b> Colophon</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="rosetta-hub.html"><a href="rosetta-hub.html"><i class="fa fa-check"></i><b>2</b> Introduction to RosettaHUB</a><ul>
<li class="chapter" data-level="2.1" data-path="rosetta-hub.html"><a href="rosetta-hub.html#features"><i class="fa fa-check"></i><b>2.1</b> Features</a></li>
<li class="chapter" data-level="2.2" data-path="rosetta-hub.html"><a href="rosetta-hub.html#your-account"><i class="fa fa-check"></i><b>2.2</b> Your account</a></li>
<li class="chapter" data-level="2.3" data-path="rosetta-hub.html"><a href="rosetta-hub.html#navigating-the-platform"><i class="fa fa-check"></i><b>2.3</b> Navigating the platform</a></li>
<li class="chapter" data-level="2.4" data-path="rosetta-hub.html"><a href="rosetta-hub.html#aws"><i class="fa fa-check"></i><b>2.4</b> AWS</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="containers.html"><a href="containers.html"><i class="fa fa-check"></i><b>3</b> Images and containers</a><ul>
<li class="chapter" data-level="3.1" data-path="containers.html"><a href="containers.html#definitions"><i class="fa fa-check"></i><b>3.1</b> Definitions</a></li>
<li class="chapter" data-level="3.2" data-path="containers.html"><a href="containers.html#images-on-rosettahub"><i class="fa fa-check"></i><b>3.2</b> Images on RosettaHUB</a></li>
<li class="chapter" data-level="3.3" data-path="containers.html"><a href="containers.html#launch-a-container"><i class="fa fa-check"></i><b>3.3</b> Launch a container</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="storage.html"><a href="storage.html"><i class="fa fa-check"></i><b>4</b> Storage</a><ul>
<li class="chapter" data-level="4.1" data-path="storage.html"><a href="storage.html#create-an-s3-bucket"><i class="fa fa-check"></i><b>4.1</b> Create an S3 bucket</a></li>
<li class="chapter" data-level="4.2" data-path="storage.html"><a href="storage.html#identity-and-access-management-iam"><i class="fa fa-check"></i><b>4.2</b> Identity and Access Management (IAM)</a></li>
<li class="chapter" data-level="4.3" data-path="storage.html"><a href="storage.html#aws-command-line-tools"><i class="fa fa-check"></i><b>4.3</b> AWS command line tools</a><ul>
<li class="chapter" data-level="4.3.1" data-path="storage.html"><a href="storage.html#installation-of-aws-cli"><i class="fa fa-check"></i><b>4.3.1</b> Installation of AWS CLI</a></li>
<li class="chapter" data-level="4.3.2" data-path="storage.html"><a href="storage.html#configuration-of-the-aws-cli"><i class="fa fa-check"></i><b>4.3.2</b> Configuration of the AWS CLI</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="customizing-images.html"><a href="customizing-images.html"><i class="fa fa-check"></i><b>5</b> Customizing images</a><ul>
<li class="chapter" data-level="5.1" data-path="customizing-images.html"><a href="customizing-images.html#introduction"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="customizing-images.html"><a href="customizing-images.html#launch-machine"><i class="fa fa-check"></i><b>5.2</b> Launch machine</a></li>
<li class="chapter" data-level="5.3" data-path="customizing-images.html"><a href="customizing-images.html#connect-to-machine"><i class="fa fa-check"></i><b>5.3</b> Connect to machine</a></li>
<li class="chapter" data-level="5.4" data-path="customizing-images.html"><a href="customizing-images.html#mount-s3-storage"><i class="fa fa-check"></i><b>5.4</b> Mount S3 storage</a></li>
<li class="chapter" data-level="5.5" data-path="customizing-images.html"><a href="customizing-images.html#configure-server-to-send-e-mail"><i class="fa fa-check"></i><b>5.5</b> Configure server to send e-mail</a></li>
<li class="chapter" data-level="5.6" data-path="customizing-images.html"><a href="customizing-images.html#install-r"><i class="fa fa-check"></i><b>5.6</b> Install R</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="formations.html"><a href="formations.html"><i class="fa fa-check"></i><b>6</b> Formations</a></li>
<li class="chapter" data-level="7" data-path="run-analysis.html"><a href="run-analysis.html"><i class="fa fa-check"></i><b>7</b> Run data analysis</a></li>
<li class="chapter" data-level="8" data-path="collaboration.html"><a href="collaboration.html"><i class="fa fa-check"></i><b>8</b> Collaboration</a><ul>
<li class="chapter" data-level="8.1" data-path="collaboration.html"><a href="collaboration.html#real-time-collaboration"><i class="fa fa-check"></i><b>8.1</b> Real time collaboration</a></li>
<li class="chapter" data-level="8.2" data-path="collaboration.html"><a href="collaboration.html#sharing-images-and-formations"><i class="fa fa-check"></i><b>8.2</b> Sharing images and formations</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="resources.html"><a href="resources.html"><i class="fa fa-check"></i><b>9</b> Resources</a><ul>
<li class="chapter" data-level="9.1" data-path="resources.html"><a href="resources.html#rosetta-hub-documentation"><i class="fa fa-check"></i><b>9.1</b> Rosetta Hub Documentation</a></li>
<li class="chapter" data-level="9.2" data-path="resources.html"><a href="resources.html#general-data-protection-regulation-gdpr"><i class="fa fa-check"></i><b>9.2</b> General Data Protection Regulation (GDPR)</a><ul>
<li class="chapter" data-level="9.2.1" data-path="resources.html"><a href="resources.html#guidance-from-the-university-of-cambridge"><i class="fa fa-check"></i><b>9.2.1</b> Guidance from the University of Cambridge</a></li>
<li class="chapter" data-level="9.2.2" data-path="resources.html"><a href="resources.html#aws-gdpr-center"><i class="fa fa-check"></i><b>9.2.2</b> AWS GDPR Center</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="resources.html"><a href="resources.html#docker-glossary"><i class="fa fa-check"></i><b>9.3</b> Docker glossary</a></li>
<li class="chapter" data-level="9.4" data-path="resources.html"><a href="resources.html#grants-available-from-service-providers"><i class="fa fa-check"></i><b>9.4</b> Grants available from service providers</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Big Data and Cloud Computing</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="storage" class="section level1">
<h1><span class="header-section-number">4</span> Storage</h1>
<p>In this chapter we will show you how to use the Amazon Web Services (AWS) Simple Storage Service (S3) (<a href="https://aws.amazon.com/documentation/s3/" class="uri">https://aws.amazon.com/documentation/s3/</a>).</p>
<div id="create-an-s3-bucket" class="section level2">
<h2><span class="header-section-number">4.1</span> Create an S3 bucket</h2>
<p>On S3, objects (data and their metadata) are stored in buckets. RosettaHUB calls these buckets <strong>Simple Storage Drives</strong> and provides a default bucket for each user.</p>
<div class="figure" style="text-align: center"><span id="fig:storageS3DriveSection"></span>
<img src="images/storage_simple_storage_drives_section.png" alt="Simple storage drive section on Federation console" width="50%" />
<p class="caption">
Figure 4.1: Simple storage drive section on Federation console
</p>
</div>
Let’s create a new bucket (simple storage drive) to use on this course. Go to the simple storage drive section on the Federation console and click create.
<div class="figure" style="text-align: center"><span id="fig:storageCreateS3Storage"></span>
<img src="images/create_s3_storage.png" alt="Create S3 storage dialog box" width="80%" />
<p class="caption">
Figure 4.2: Create S3 storage dialog box
</p>
</div>
<p>Specify a <strong>Label</strong> and <strong>Bucket</strong>. Accept defaults for all other settings. The <strong>Bucket</strong> name must be globally unique (<a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/BucketRestrictions.html" class="uri">https://docs.aws.amazon.com/AmazonS3/latest/dev/BucketRestrictions.html</a>), so here we have combined our username (bioinfo1.cam) with the RosettaHUB domain name:</p>
<p><strong>Label</strong>: <em>course</em></p>
<p><strong>Bucket</strong>: <em>com-rosettahub-course-bioinfo1.cam</em></p>
<div class="figure" style="text-align: center"><span id="fig:storageCreateS3StorageCompletedForm"></span>
<img src="images/create_s3_storage_form_completed.png" alt="Set Label and Bucket names" width="80%" />
<p class="caption">
Figure 4.3: Set Label and Bucket names
</p>
</div>
Once your new simple storage drive has been created, it will be listed alongside your default storage drive.
<div class="figure" style="text-align: center"><span id="fig:storageS3course"></span>
<img src="images/simple_storage_drives_incl_course.png" alt="New S3 bucket has been added to list of simple storage drives." width="80%" />
<p class="caption">
Figure 4.4: New S3 bucket has been added to list of simple storage drives.
</p>
</div>
Left clicking on the new bucket (simple storage drive) will take you to the AWS management console. Try uploading a file.
<div class="figure" style="text-align: center"><span id="fig:storageS3BucketWebInterface"></span>
<img src="images/s3_bucket_web_interface.png" alt="S3 bucket web interface." width="100%" />
<p class="caption">
Figure 4.5: S3 bucket web interface.
</p>
</div>
</div>
<div id="identity-and-access-management-iam" class="section level2">
<h2><span class="header-section-number">4.2</span> Identity and Access Management (IAM)</h2>
<p>AWS Identity and Access Management (IAM) enables you to control access to AWS services and resources. IAM users are useful if you want to give access to your account to other users or groups but with a limit on what they can do on your account. This allows you for example to give access to AWS to users who do not have an AWS account or to give access to a specific S3 buckets to a group of users.</p>
We will use IAM to manage access to our new S3 bucket (simple storage drive). In the Federation Console, expand the AWS menu on the left hand panel, and select IAM users.
<div class="figure" style="text-align: center"><span id="fig:storageAWSmenu"></span>
<img src="images/aws_menu_RH.png" alt="AWS menu in Federation Console." width="30%" />
<p class="caption">
Figure 4.6: AWS menu in Federation Console.
</p>
</div>
This will display the following table:
<div class="figure" style="text-align: center"><span id="fig:iamUsers"></span>
<img src="images/IAM_users.png" alt="IAM users" width="100%" />
<p class="caption">
Figure 4.7: IAM users
</p>
</div>
You will see that an IAM user has been created for you automatically. This default IAM user has access to all of your AWS resources. We want to create an IAM user that can be used to share your new S3 bucket, but does not have access to any of your other resources. Click on the <strong>Create</strong> button to bring up the following dialog box:
<div class="figure" style="text-align: center"><span id="fig:createIAMuser"></span>
<img src="images/create_iam_user.png" alt="Create IAM user dialog." width="80%" />
<p class="caption">
Figure 4.8: Create IAM user dialog.
</p>
</div>
<p>Enter an <strong>Iam User Name</strong> and <strong>Label</strong>. The <strong>Signin Url</strong> can be left blank and the <strong>Default Region</strong> does not need to be changed from <strong>eu-west-1</strong>. The default policy is <strong>AdministratorAccess</strong>, which is inappropriate for our new IAM user. Selecting <strong>AmazonS3FullAccess</strong> brings up a more restrictive policy, where the new IAM user can only access S3 services:</p>
<pre><code>{
  &quot;Version&quot;: &quot;2012-10-17&quot;,
  &quot;Statement&quot;: [
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;s3:*&quot;,
      &quot;Resource&quot;: &quot;*&quot;
    }
  ]
}</code></pre>
<p>However, this is still too permissive. We want to restrict our new IAM user to the S3 bucket we’ve created for the course. This can be achieved by specifying the following policy:</p>
<pre><code>{
  &quot;Version&quot;: &quot;2012-10-17&quot;,
  &quot;Statement&quot;: [
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;s3:*&quot;,
      &quot;Resource&quot;: [&quot;arn:aws:s3:::com-rosettahub-course-bioinfo1.cam/*&quot;]
    }
  ]
}</code></pre>
The completed form should look something like this:
<div class="figure" style="text-align: center"><span id="fig:createIAMuserCompletedForm"></span>
<img src="images/create_iam_user_completed_form.png" alt="Create IAM user dialog. Auto generated policy replaced with manually edited version." width="80%" />
<p class="caption">
Figure 4.9: Create IAM user dialog. Auto generated policy replaced with manually edited version.
</p>
</div>
</div>
<div id="aws-command-line-tools" class="section level2">
<h2><span class="header-section-number">4.3</span> AWS command line tools</h2>
<p>Earlier we saw how we could upload files to our S3 bucket using the web interface. Amazon AWS also provide a Command Line Interface (CLI) to Amazon S3. The CLI can be used to script and automate file transfers.</p>
<div id="installation-of-aws-cli" class="section level3">
<h3><span class="header-section-number">4.3.1</span> Installation of AWS CLI</h3>
<p>Instructions for installing the AWS CLI can be found here: <a href="https://docs.aws.amazon.com/cli/latest/userguide/installing.html" class="uri">https://docs.aws.amazon.com/cli/latest/userguide/installing.html</a></p>
<p>The AWS CLI has already been installed on the classroom workstations. Verify that is has been installed correctly by running:</p>
<pre><code>aws --version</code></pre>
</div>
<div id="configuration-of-the-aws-cli" class="section level3">
<h3><span class="header-section-number">4.3.2</span> Configuration of the AWS CLI</h3>
<p>Configuration of the AWS CLI requires the <strong>Access Key ID</strong> and the <strong>Secret access key</strong> of an IAM user. From the RosettaHUB Federation Console go to the <strong>IAM Users</strong> panel. Copy the security credentials for the IAM user we created earlier; they should look something like this:</p>
<ul>
<li>Access key ID: AKIAIOSFODNN7EXAMPLE</li>
<li>Secret Access Key: UYPg0R42LkqfVbp2YKre/Rz6FbepX/EXAMPLEKEY</li>
</ul>
<p>Run the configuration tool:</p>
<pre><code>aws configure</code></pre>
<p>Enter security credentials of IAM user. Default region name should be set to eu-west-1, and default output format to json.</p>
<pre><code>AWS Access Key ID [****************JQKA]: AKIAJQWONQOOSXXXXXXX
AWS Secret Access Key [****************APTR]: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
Default region name [eu-west-1]: 
Default output format [json]: </code></pre>
<p>We are now ready to upload files to the S3 bucket we created for the course. Let’s copy the data subdirectory of Course_Materials to our new S3 bucket.</p>
<pre><code>aws s3 cp --recursive ~/Course_Materials/data s3://com-rosettahub-course-bioinfo1.cam/data/</code></pre>
<p>Go to the web interface for the bucket and you will see the data directory and its contents.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="containers.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="customizing-images.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/bioinformatics-training/intro-machine-learning/edit/master/04-storage.Rmd",
"text": "Edit"
},
"download": ["big-data-cloud-computing.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
